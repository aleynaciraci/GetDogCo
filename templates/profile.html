{% extends "layout.html" %}
{% load form_tags %}
{% load static %}
{% load i18n %}
{% block body %}

<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-lg-10">

      <div class="card shadow p-4 border-0 light-bg-blue dark-mode-bg">
        <div class="row align-items-center">

          <!-- SOL: Profil Fotoğrafı -->
          <div class="col-md-4 text-center mb-4 mb-md-0">
            <img src="{{ request.user.profile.image.url }}" alt="{% trans 'Profil Fotoğrafı' %}"
                 class="rounded-circle img-fluid border shadow-sm" style="width: 160px; height: 160px; object-fit: cover;">
            <p class="mt-3 text-muted">📤 {% trans "Yeni fotoğraf yükleyerek değiştirebilirsin." %}</p>
            <p class="text-muted">🐾 {% trans "Toplam" %} <strong>{{ post_count }}</strong> {% trans "ilan verdiniz." %}</p>
          </div>

          <!-- SAĞ: Bilgi Formları -->
          <div class="col-md-8">
            <h3 class="font-weight-bold mb-4">👤 {% trans "Profil Bilgileri" %}</h3>
            <form method="POST" enctype="multipart/form-data">
              {% csrf_token %}

              <div class="form-group">
                <label for="id_username">{% trans "Kullanıcı Adı" %}</label>
                {{ u_form.username|add_class:"form-control" }}
              </div>

              <div class="form-group">
                <label for="id_email">{% trans "E-posta" %}</label>
                {{ u_form.email|add_class:"form-control" }}
              </div>

              <div class="form-group">
                <label for="id_image">{% trans "Profil Fotoğrafı" %}</label>
                {{ p_form.image|add_class:"form-control-file" }}
              </div>

              <div class="d-flex flex-wrap gap-2 mt-4">
                <button type="submit" class="btn text-dark" style="background-color: #ffe066;">💾 {% trans "Kaydet" %}</button>
                <a href="{% url 'password_change' %}" class="btn btn-outline-secondary">🔐 {% trans "Şifre Değiştir" %}</a>
              </div>
            </form>
          </div>

        </div>
      </div>

    </div>
  </div>
</div>

{% endblock %}
